<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>trackTester</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      overflow: auto;
    }
    .button-container {
      max-height: 80vh;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
    }
    button {
      margin-bottom: 1rem;
    }
  </style>
</head>
<body>
  <div id="last-clicked-song"></div>
  <br>
  <div class="button-container" id="button-container">
  </div>

  <script>
  
const soundTracks = {
	mysteriousAmbience: [
	['C3', 0.5], ['G3', 0.5], ['C4', 0.5], ['E4', 0.5],
	['A2', 0.5], ['E3', 0.5], ['A3', 0.5], ['C#4', 0.5],
	['D3', 0.5], ['A3', 0.5], ['D4', 0.5], ['F#4', 0.5],
	['G2', 0.5], ['D3', 0.5], ['G3', 0.5], ['B3', 0.5]
	],
	
epicAdventure: [
    ['C4', 0.4], ['E4', 0.4], ['G4', 0.4], ['C5', 0.4], ['G4', 0.4], ['E4', 0.4],
    ['A3', 0.4], ['C4', 0.4], ['E4', 0.4], ['A4', 0.4], ['E4', 0.4], ['C4', 0.4],
    ['F3', 0.4], ['A3', 0.4], ['C4', 0.4], ['F4', 0.4], ['C4', 0.4], ['A3', 0.4],
    ['G3', 0.4], ['B3', 0.4], ['D4', 0.4], ['G4', 0.4], ['D4', 0.4], ['B3', 0.4],

    ['E4', 0.4], ['G4', 0.4], ['B4', 0.4], ['E5', 0.4], ['B4', 0.4], ['G4', 0.4],
    ['D4', 0.4], ['F#4', 0.4], ['A4', 0.4], ['D5', 0.4], ['A4', 0.4], ['F#4', 0.4],
    ['C4', 0.4], ['E4', 0.4], ['G4', 0.4], ['C5', 0.4], ['G4', 0.4], ['E4', 0.4],
    ['G3', 0.4], ['B3', 0.4], ['D4', 0.4], ['G4', 0.4], ['D4', 0.4], ['B3', 0.4],

    ['C4', 0.4], ['E4', 0.4], ['G4', 0.4], ['C5', 0.4], ['G4', 0.4], ['E4', 0.4],
    ['A3', 0.4], ['C4', 0.4], ['E4', 0.4], ['A4', 0.4], ['E4', 0.4], ['C4', 0.4],
    ['F3', 0.4], ['A3', 0.4], ['C4', 0.4], ['F4', 0.4], ['C4', 0.4], ['A3', 0.4],
    ['G3', 0.4], ['B3', 0.4], ['D4', 0.4], ['G4', 0.4], ['D4', 0.4], ['B3', 0.4],
  ],
  
  darkMysticJourney: [
    ['F2', 0.4], ['C3', 0.4], ['F3', 0.8], ['A3', 0.8], ['E2', 0.4], ['B2', 0.4], ['E3', 0.8], ['G#3', 0.8],
    ['G2', 0.4], ['D3', 0.4], ['G3', 0.8], ['B3', 0.8], ['A2', 0.4], ['E3', 0.4], ['A3', 0.8], ['C#4', 0.8],

    ['F2', 0.4], ['C3', 0.4], ['F3', 0.8], ['A3', 0.8], ['E2', 0.4], ['B2', 0.4], ['E3', 0.8], ['G#3', 0.8],
    ['G2', 0.4], ['D3', 0.4], ['G3', 0.8], ['B3', 0.8], ['A2', 0.4], ['E3', 0.4], ['A3', 0.8], ['C#4', 0.8],

    ['F2', 0.4], ['C3', 0.4], ['F3', 0.8], ['A3', 0.8], ['E2', 0.4], ['B2', 0.4], ['E3', 0.8], ['G#3', 0.8],
    ['G2', 0.4], ['D3', 0.4], ['G3', 0.8], ['B3', 0.8], ['A2', 0.4], ['E3', 0.4], ['A3', 0.8], ['C#4', 0.8],
  ],
  
  forgottenKingdoms: [

    ['C3', 0.4], ['E3', 0.4], ['G3', 0.8], ['C4', 0.8], ['G3', 0.4], ['E3', 0.4],
    ['A2', 0.4], ['D3', 0.4], ['F3', 0.8], ['A3', 0.8], ['F3', 0.4], ['D3', 0.4],
    ['D#2', 0.4], ['G2', 0.4], ['A#2', 0.8], ['D#3', 0.8], ['A#2', 0.4], ['G2', 0.4],
    ['G2', 0.4], ['C3', 0.4], ['D#3', 0.8], ['G3', 0.8], ['D#3', 0.4], ['C3', 0.4],
  ],

legendaryBanger: [
    ['E4', 0.2], ['G4', 0.2], ['B4', 0.2], ['E5', 0.2], ['B4', 0.2], ['G4', 0.2],
    ['C5', 0.2], ['E5', 0.2], ['G5', 0.2], ['C6', 0.2], ['G5', 0.2], ['E5', 0.2],
    ['B4', 0.2], ['D5', 0.2], ['F#5', 0.2], ['B5', 0.2], ['F#5', 0.2], ['D5', 0.2],
    ['G4', 0.2], ['B4', 0.2], ['D5', 0.2], ['G5', 0.2], ['D5', 0.2], ['B4', 0.2],
],
  
DarkMystique: [
    ['E3', 0.2], ['G3', 0.2], ['B3', 0.2], ['E4', 0.2], ['B3', 0.2], ['G3', 0.2],
    ['C4', 0.2], ['E4', 0.2], ['G4', 0.2], ['C5', 0.2], ['G4', 0.2], ['E4', 0.2],
    ['B3', 0.2], ['D4', 0.2], ['F#4', 0.2], ['B4', 0.2], ['F#4', 0.2], ['D4', 0.2],
    ['G3', 0.2], ['B3', 0.2], ['D4', 0.2], ['G4', 0.2], ['D4', 0.2], ['B3', 0.2],
],

dungeonDelverAnthem: [
    ['C4', 0.25], ['G3', 0.25], ['E4', 0.5], ['G4', 0.5],
    ['C5', 0.25], ['G4', 0.25], ['E4', 0.5], ['C4', 0.5],

    ['A3', 0.25], ['E3', 0.25], ['C4', 0.5], ['E4', 0.5],
    ['A4', 0.25], ['E4', 0.25], ['C4', 0.5], ['A3', 0.5],

    ['D4', 0.25], ['A3', 0.25], ['F4', 0.5], ['A4', 0.5],
    ['D5', 0.25], ['A4', 0.25], ['F4', 0.5], ['D4', 0.5],

    ['G4', 0.25], ['D4', 0.25], ['B3', 0.5], ['D4', 0.5],
    ['G4', 0.25], ['D4', 0.25], ['B3', 0.5], ['G3', 0.5],
  ],

  fantasySaga: [
    ['C4', 0.4], ['G4', 0.4], ['E4', 0.4], ['G4', 0.4],
    ['C5', 0.4], ['G4', 0.4], ['E4', 0.4], ['C4', 0.4],

    ['A3', 0.4], ['E4', 0.4], ['C4', 0.4], ['E4', 0.4],
    ['A4', 0.4], ['E4', 0.4], ['C4', 0.4], ['A3', 0.4],

    ['D4', 0.4], ['A4', 0.4], ['F4', 0.4], ['A4', 0.4],
    ['D5', 0.4], ['A4', 0.4], ['F4', 0.4], ['D4', 0.4],
	],
	
	dungeonCrusader: [
    ['E4', 0.3], ['G4', 0.3], ['B4', 0.6], ['E5', 0.6], ['B4', 0.3], ['G4', 0.3],
    ['C5', 0.3], ['E5', 0.3], ['G5', 0.6], ['C6', 0.6], ['G5', 0.3], ['E5', 0.3],

    ['B4', 0.3], ['D5', 0.3], ['F#5', 0.6], ['B5', 0.6], ['F#5', 0.3], ['D5', 0.3],
    ['G4', 0.3], ['B4', 0.3], ['D5', 0.6], ['G5', 0.6], ['D5', 0.3], ['B4', 0.3],
  ],
  
  shadowSlayer: [
    ['E4', 0.4], ['G4', 0.4], ['B4', 0.8], ['G4', 0.4], ['E4', 0.4], ['B3', 0.4],
    ['D4', 0.4], ['F#4', 0.4], ['A4', 0.8], ['F#4', 0.4], ['D4', 0.4], ['A3', 0.4],

    ['C4', 0.4], ['E4', 0.4], ['G4', 0.8], ['E4', 0.4], ['C4', 0.4], ['G3', 0.4],
    ['B3', 0.4], ['D4', 0.4], ['F#4', 0.8], ['D4', 0.4], ['B3', 0.4], ['F#3', 0.4],

    ['E4', 0.4], ['G4', 0.4], ['C5', 0.8], ['G4', 0.4], ['E4', 0.4], ['C4', 0.4],
    ['D4', 0.4], ['F#4', 0.4], ['B4', 0.8], ['F#4', 0.4], ['D4', 0.4], ['B3', 0.4],

    ['C4', 0.4], ['E4', 0.4], ['A4', 0.8], ['E4', 0.4], ['C4', 0.4], ['A3', 0.4],
    ['B3', 0.4], ['D4', 0.4], ['G4', 0.8], ['D4', 0.4], ['B3', 0.4], ['G3', 0.4],
  ],

arcaneLabyrinth: [
    ['E4', 0.3], ['G4', 0.3], ['B4', 0.6], ['A4', 0.3], ['G4', 0.3], ['E4', 0.6],
    ['D4', 0.3], ['F#4', 0.3], ['A4', 0.6], ['G4', 0.3], ['F#4', 0.3], ['D4', 0.6],

    ['C4', 0.3], ['E4', 0.3], ['G4', 0.6], ['F#4', 0.3], ['E4', 0.3], ['C4', 0.6],
    ['B3', 0.3], ['D4', 0.3], ['F#4', 0.6], ['E4', 0.3], ['D4', 0.3], ['B3', 0.6],
  ],
  
  arcaneMaze: [
    ['E4', 0.4], ['G4', 0.4], ['B4', 0.4], ['E4', 0.4], ['B3', 0.4], ['E3', 0.4],
    ['D4', 0.4], ['F#4', 0.4], ['A4', 0.4], ['D4', 0.4], ['A3', 0.4], ['D3', 0.4],

    ['C4', 0.4], ['E4', 0.4], ['G4', 0.4], ['C4', 0.4], ['G3', 0.4], ['C3', 0.4],
    ['B3', 0.4], ['D4', 0.4], ['F#4', 0.4], ['B3', 0.4], ['F#3', 0.4], ['B2', 0.4],

    ['E4', 0.4], ['G4', 0.4], ['C5', 0.4], ['E4', 0.4], ['C4', 0.4], ['E3', 0.4],
    ['D4', 0.4], ['F#4', 0.4], ['B4', 0.4], ['D4', 0.4], ['B3', 0.4], ['D3', 0.4],

    ['C4', 0.4], ['E4', 0.4], ['A4', 0.4], ['C4', 0.4], ['A3', 0.4], ['C3', 0.4],
    ['B3', 0.4], ['D4', 0.4], ['G4', 0.4], ['B3', 0.4], ['G3', 0.4], ['B2', 0.4],
  ],
  
  crypticLabyrinth: [
    ['G4', 0.3], ['E4', 0.3], ['D4', 0.6], ['B3', 0.3], ['G3', 0.3], ['E3', 0.3],
    ['A3', 0.2], ['C4', 0.2], ['E4', 0.4], ['A4', 0.6], ['E4', 0.2], ['C4', 0.2],

    ['F4', 0.4], ['D4', 0.4], ['C4', 0.4], ['A3', 0.3], ['F3', 0.3], ['D3', 0.3],
    ['G3', 0.2], ['B3', 0.2], ['D4', 0.4], ['G4', 0.6], ['D4', 0.2], ['B3', 0.2],

    ['E4', 0.3], ['G4', 0.3], ['B4', 0.3], ['E5', 0.3], ['B4', 0.3], ['G4', 0.3],
    ['A4', 0.2], ['C5', 0.2], ['E5', 0.4], ['A5', 0.6], ['E5', 0.2], ['C5', 0.2],

    ['F4', 0.4], ['A4', 0.4], ['C5', 0.4], ['F5', 0.3], ['C5', 0.3], ['A4', 0.3],
    ['G4', 0.2], ['B4', 0.2], ['D5', 0.4], ['G5', 0.6], ['D5', 0.2], ['B4', 0.2],
  ],
  
  shadowyAbyss: [
    ['E4', 0.3], ['C4', 0.3], ['B3', 0.6], ['G3', 0.3], ['E3', 0.3], ['C3', 0.3],
    ['F3', 0.2], ['A3', 0.2], ['C4', 0.4], ['F4', 0.6], ['C4', 0.2], ['A3', 0.2],

    ['G4', 0.4], ['E4', 0.4], ['D4', 0.4], ['B3', 0.3], ['G3', 0.3], ['E3', 0.3],
    ['A3', 0.2], ['C4', 0.2], ['E4', 0.4], ['A4', 0.6], ['E4', 0.2], ['C4', 0.2],

    ['D4', 0.3], ['B3', 0.3], ['A3', 0.3], ['F3', 0.3], ['D3', 0.3], ['B2', 0.3],
    ['E3', 0.2], ['G3', 0.2], ['B3', 0.4], ['E4', 0.6], ['B3', 0.2], ['G3', 0.2],

    ['F4', 0.4], ['D4', 0.4], ['C4', 0.4], ['A3', 0.3], ['F3', 0.3], ['D3', 0.3],
    ['G3', 0.2], ['B3', 0.2], ['D4', 0.4], ['G4', 0.6], ['D4', 0.2], ['B3', 0.2],
  ],
  
  arcaneInferno: [
    ['E4', 0.3], ['G4', 0.3], ['B4', 0.6], ['E5', 0.3], ['C5', 0.3], ['A4', 0.3],
    ['D4', 0.2], ['F4', 0.2], ['A4', 0.4], ['D5', 0.6], ['A4', 0.2], ['F4', 0.2],

    ['G4', 0.4], ['B4', 0.4], ['D5', 0.4], ['G5', 0.3], ['E5', 0.3], ['C5', 0.3],
    ['F4', 0.2], ['A4', 0.2], ['C5', 0.4], ['F5', 0.6], ['C5', 0.2], ['A4', 0.2],

    ['E5', 0.3], ['C5', 0.3], ['A4', 0.3], ['E4', 0.3], ['G4', 0.3], ['B4', 0.3],
    ['D5', 0.2], ['B4', 0.2], ['G4', 0.4], ['D4', 0.6], ['G4', 0.2], ['B4', 0.2],

    ['C5', 0.4], ['A4', 0.4], ['F4', 0.4], ['C4', 0.3], ['E4', 0.3], ['G4', 0.3],
    ['A4', 0.2], ['F4', 0.2], ['D4', 0.4], ['A3', 0.6], ['D4', 0.2], ['F4', 0.2],
  ],
  
  endlessArcade: [
    ['C4', 0.3], ['E4', 0.3], ['G4', 0.3], ['C5', 0.3], ['G4', 0.3], ['E4', 0.3],
	['C5', 0.3], ['A4', 0.3], ['E4', 0.3], ['C4', 0.3], ['G3', 0.3], ['E3', 0.3],
	
    ['A3', 0.3], ['C4', 0.3], ['E4', 0.3], ['A4', 0.3], ['E4', 0.3], ['C4', 0.3],
	['F4', 0.3], ['D4', 0.3], ['A3', 0.3], ['F3', 0.3], ['C3', 0.3], ['A2', 0.3],

    ['D4', 0.3], ['F4', 0.3], ['A4', 0.3], ['D5', 0.3], ['A4', 0.3], ['F4', 0.3],
	['G4', 0.3], ['E4', 0.3], ['C4', 0.3], ['G3', 0.3], ['D3', 0.3], ['B2', 0.3],
	
    ['G3', 0.3], ['B3', 0.3], ['D4', 0.3], ['G4', 0.3], ['D4', 0.3], ['B3', 0.3],    
    ['A4', 0.3], ['F4', 0.3], ['D4', 0.3], ['A3', 0.3], ['E3', 0.3], ['C3', 0.3],
  ],
  
  arcaneLabyrinth2: [
    ['G4', 0.4], ['E4', 0.4], ['C4', 0.4], ['G3', 0.4], ['C4', 0.4], ['E4', 0.4],
    ['F4', 0.4], ['D4', 0.4], ['B3', 0.4], ['F3', 0.4], ['B3', 0.4], ['D4', 0.4],

    ['E4', 0.4], ['C4', 0.4], ['A3', 0.4], ['E3', 0.4], ['A3', 0.4], ['C4', 0.4],
    ['D4', 0.4], ['B3', 0.4], ['G3', 0.4], ['D3', 0.4], ['G3', 0.4], ['B3', 0.4],

    ['C4', 0.4], ['A3', 0.4], ['E3', 0.4], ['C3', 0.4], ['E3', 0.4], ['A3', 0.4],
    ['B3', 0.4], ['G3', 0.4], ['D3', 0.4], ['B2', 0.4], ['D3', 0.4], ['G3', 0.4],

    ['A3', 0.4], ['F3', 0.4], ['C3', 0.4], ['A2', 0.4], ['C3', 0.4], ['F3', 0.4],
    ['G3', 0.4], ['E3', 0.4], ['C3', 0.4], ['G2', 0.4], ['C3', 0.4], ['E3', 0.4],
  ],
  
  arcaneWhispers: [
    ['C4', 0.3], ['E4', 0.5], ['G4', 0.7], ['C5', 0.5], ['G4', 0.3], ['E4', 0.5],
    ['A3', 0.3], ['C4', 0.5], ['E4', 0.7], ['A4', 0.5], ['E4', 0.3], ['C4', 0.5],

    ['F3', 0.3], ['A3', 0.5], ['C4', 0.7], ['F4', 0.5], ['C4', 0.3], ['A3', 0.5],
    ['G3', 0.3], ['B3', 0.5], ['D4', 0.7], ['G4', 0.5], ['D4', 0.3], ['B3', 0.5],

    ['E4', 0.3], ['G4', 0.5], ['B4', 0.7], ['E5', 0.5], ['B4', 0.3], ['G4', 0.5],
    ['D4', 0.3], ['F#4', 0.5], ['A4', 0.7], ['D5', 0.5], ['A4', 0.3], ['F#4', 0.5],

    ['C4', 0.3], ['E4', 0.5], ['G4', 0.7], ['C5', 0.5], ['G4', 0.3], ['E4', 0.5],
    ['G3', 0.3], ['B3', 0.5], ['D4', 0.7], ['G4', 0.5], ['D4', 0.3], ['B3', 0.5],
  ],
  
  enigmaticRiddle: [
    ['D4', 0.4], ['F#4', 0.6], ['A4', 0.4], ['D5', 0.6], ['A4', 0.4], ['F#4', 0.6],
    ['G4', 0.4], ['B4', 0.6], ['D5', 0.4], ['G5', 0.6], ['D5', 0.4], ['B4', 0.6],

    ['A4', 0.4], ['C5', 0.6], ['E5', 0.4], ['A5', 0.6], ['E5', 0.4], ['C5', 0.6],
    ['E4', 0.4], ['G4', 0.6], ['B4', 0.4], ['E5', 0.6], ['B4', 0.4], ['G4', 0.6],

    ['C5', 0.4], ['E5', 0.6], ['G5', 0.4], ['C6', 0.6], ['G5', 0.4], ['E5', 0.6],
    ['F4', 0.4], ['A4', 0.6], ['C5', 0.4], ['F5', 0.6], ['C5', 0.4], ['A4', 0.6],

    ['B4', 0.4], ['D5', 0.6], ['F#5', 0.4], ['B5', 0.6], ['F#5', 0.4], ['D5', 0.6],
    ['G4', 0.4], ['B4', 0.6], ['D5', 0.4], ['G5', 0.6], ['D5', 0.4], ['B4', 0.6],
  ],
  
  arcanePulse: [
    ['F4', 0.5], ['A4', 0.7], ['C5', 0.5], ['F5', 0.7], ['C5', 0.5], ['A4', 0.7],
    ['G4', 0.5], ['B4', 0.7], ['D5', 0.5], ['G5', 0.7], ['D5', 0.5], ['B4', 0.7],

    ['A4', 0.5], ['C5', 0.7], ['E5', 0.5], ['A5', 0.7], ['E5', 0.5], ['C5', 0.7],
    ['E4', 0.5], ['G4', 0.7], ['B4', 0.5], ['E5', 0.7], ['B4', 0.5], ['G4', 0.7],

    ['C5', 0.5], ['E5', 0.7], ['G5', 0.5], ['C6', 0.7], ['G5', 0.5], ['E5', 0.7],
    ['F4', 0.5], ['A4', 0.7], ['C5', 0.5], ['F5', 0.7], ['C5', 0.5], ['A4', 0.7],

    ['B4', 0.5], ['D5', 0.7], ['F#5', 0.5], ['B5', 0.7], ['F#5', 0.5], ['D5', 0.7],
    ['G4', 0.5], ['B4', 0.7], ['D5', 0.5], ['G5', 0.7], ['D5', 0.5], ['B4', 0.7],
  ],
  
  arcaneSpiral: [
    ['G4', 0.4], ['B4', 0.5], ['D5', 0.6], ['G5', 0.5], ['D5', 0.6], ['B4', 0.5],
    ['A4', 0.4], ['C5', 0.5], ['E5', 0.6], ['A5', 0.5], ['E5', 0.6], ['C5', 0.5],

    ['F4', 0.4], ['A4', 0.5], ['C5', 0.6], ['F5', 0.5], ['C5', 0.6], ['A4', 0.5],
    ['E4', 0.4], ['G4', 0.5], ['B4', 0.6], ['E5', 0.5], ['B4', 0.6], ['G4', 0.5],

    ['C5', 0.4], ['E5', 0.5], ['G5', 0.6], ['C6', 0.5], ['G5', 0.6], ['E5', 0.5],
    ['F4', 0.4], ['A4', 0.5], ['C5', 0.6], ['F5', 0.5], ['C5', 0.6], ['A4', 0.5],

    ['B4', 0.4], ['D5', 0.5], ['F#5', 0.6], ['B5', 0.5], ['F#5', 0.6], ['D5', 0.5],
    ['G4', 0.4], ['B4', 0.5], ['D5', 0.6], ['G5', 0.5], ['D5', 0.6], ['B4', 0.5],
  ],
  
  arcaneWanderer: [
    ['F4', 0.3], ['A4', 0.5], ['C5', 0.3], ['F5', 0.5], ['C5', 0.3], ['A4', 0.5],
    ['G4', 0.3], ['B4', 0.5], ['D5', 0.3], ['G5', 0.5], ['D5', 0.3], ['B4', 0.5],

    ['A4', 0.3], ['C5', 0.5], ['E5', 0.3], ['A5', 0.5], ['E5', 0.3], ['C5', 0.5],
    ['E4', 0.3], ['G4', 0.5], ['B4', 0.3], ['E5', 0.5], ['B4', 0.3], ['G4', 0.5],

    ['C5', 0.5], ['E5', 0.3], ['G5', 0.5], ['C6', 0.3], ['G5', 0.5], ['E5', 0.3],
    ['F4', 0.5], ['A4', 0.3], ['C5', 0.5], ['F5', 0.3], ['C5', 0.5], ['A4', 0.3],

    ['B4', 0.5], ['D5', 0.3], ['F#5', 0.5], ['B5', 0.3], ['F#5', 0.5], ['D5', 0.3],
    ['G4', 0.5], ['B4', 0.3], ['D5', 0.5], ['G5', 0.3], ['D5', 0.5], ['B4', 0.3],
  ],
  
  arcaneMaze2: [
    ['D4', 0.3], ['F#4', 0.5], ['A4', 0.7], ['D5', 0.5], ['A4', 0.3], ['F#4', 0.5],
    ['G4', 0.3], ['B4', 0.5], ['D5', 0.7], ['G5', 0.5], ['D5', 0.3], ['B4', 0.5],

    ['A4', 0.3], ['C5', 0.5], ['E5', 0.7], ['A5', 0.5], ['E5', 0.3], ['C5', 0.5],
    ['E4', 0.3], ['G4', 0.5], ['B4', 0.7], ['E5', 0.5], ['B4', 0.3], ['G4', 0.5],

    ['C5', 0.3], ['E5', 0.5], ['G5', 0.7], ['C6', 0.5], ['G5', 0.3], ['E5', 0.5],
    ['F4', 0.3], ['A4', 0.5], ['C5', 0.7], ['F5', 0.5], ['C5', 0.3], ['A4', 0.5],

    ['B4', 0.3], ['D5', 0.5], ['F#5', 0.7], ['B5', 0.5], ['F#5', 0.3], ['D5', 0.5],
    ['G4', 0.3], ['B4', 0.5], ['D5', 0.7], ['G5', 0.5], ['D5', 0.3], ['B4', 0.5],
  ],

arcaneChronicles: [
    ['C4', 0.4], ['E4', 0.4], ['G4', 0.4], ['C5', 0.4], ['G4', 0.4], ['E4', 0.4],
    ['D4', 0.4], ['F#4', 0.4], ['A4', 0.4], ['D5', 0.4], ['A4', 0.4], ['F#4', 0.4],

    ['E4', 0.4], ['G4', 0.4], ['B4', 0.4], ['E5', 0.4], ['B4', 0.4], ['G4', 0.4],
    ['A3', 0.4], ['C4', 0.4], ['E4', 0.4], ['A4', 0.4], ['E4', 0.4], ['C4', 0.4],

    ['D4', 0.4], ['F4', 0.4], ['A4', 0.4], ['D5', 0.4], ['A4', 0.4], ['F4', 0.4],
    ['G3', 0.4], ['B3', 0.4], ['D4', 0.4], ['G4', 0.4], ['D4', 0.4], ['B3', 0.4],

    ['C4', 0.4], ['E4', 0.4], ['G4', 0.4], ['C5', 0.4], ['G4', 0.4], ['E4', 0.4],
    ['D4', 0.4], ['F#4', 0.4], ['A4', 0.4], ['D5', 0.4], ['A4', 0.4], ['F#4', 0.4],
  ],
  
  shadowsOfTheAbyss: [
    ['D4', 0.4], ['F4', 0.4], ['A4', 0.4], ['D5', 0.4], ['A4', 0.4], ['F4', 0.4],
    ['E4', 0.4], ['G4', 0.4], ['B4', 0.4], ['E5', 0.4], ['B4', 0.4], ['G4', 0.4],

    ['C4', 0.4], ['E4', 0.4], ['G4', 0.4], ['C5', 0.4], ['G4', 0.4], ['E4', 0.4],
    ['F4', 0.4], ['A4', 0.4], ['C5', 0.4], ['F5', 0.4], ['C5', 0.4], ['A4', 0.4],

    ['G4', 0.4], ['B4', 0.4], ['D5', 0.4], ['G5', 0.4], ['D5', 0.4], ['B4', 0.4],
    ['A4', 0.4], ['C5', 0.4], ['E5', 0.4], ['A5', 0.4], ['E5', 0.4], ['C5', 0.4],
  ],

};

const noteToFrequencyMap = {
    'C2': 65.41, 'C#2': 69.30, 'D2': 73.42, 'D#2': 77.78, 'E2': 82.41, 'F2': 87.31, 'F#2': 92.50, 'G2': 98.00, 'G#2': 103.83, 'A2': 110.00, 'A#2': 116.54, 'B2': 123.47,
    'C3': 130.81, 'C#3': 138.59, 'D3': 146.83, 'D#3': 155.56, 'E3': 164.81, 'F3': 174.61, 'F#3': 185.00, 'G3': 196.00, 'G#3': 207.65, 'A3': 220.00, 'A#3': 233.08, 'B3': 246.94,
    'C4': 261.63, 'C#4': 277.18, 'D4': 293.66, 'D#4': 311.13, 'E4': 329.63, 'F4': 349.23, 'F#4': 369.99, 'G4': 392.00, 'G#4': 415.30, 'A4': 440.00, 'A#4': 466.16, 'B4': 493.88,
    'C5': 523.25, 'C#5': 554.37, 'D5': 587.33, 'D#5': 622.25, 'E5': 659.26, 'F5': 698.46, 'F#5': 739.99, 'G5': 783.99, 'G#5': 830.61, 'A5': 880.00, 'A#5': 932.33, 'B5': 987.77,
    'C6': 1046.50, 'C#6': 1108.73, 'D6': 1174.66, 'D#6': 1244.51, 'E6': 1318.51, 'F6': 1396.91, 'F#6': 1479.98, 'G6': 1567.98, 'G#6': 1661.22, 'A6': 1760.00, 'A#6': 1864.66, 'B6': 1975.53,
  };
  let audioContext, compressor, gainNode,loopedSource, loopedMelody
  let waveformType, attack, decay, sustain, release, lowPassStrength;
  let fadeInDuration, fadeOutDuration;

let audioContextInitialized = false;

async function initAudioContext() {
  if (audioContextInitialized) return;

  audioContext = new (window.AudioContext || window.webkitAudioContext)();
  compressor = audioContext.createDynamicsCompressor();

  compressor.threshold.value = -40;
  compressor.knee.value = 40;
  compressor.ratio.value = 8;
  compressor.attack.value = 0.001;
  compressor.release.value = 0.1;

  gainNode = audioContext.createGain();
  gainNode.connect(compressor);
  compressor.connect(audioContext.destination);
  
  //sounds settings
  waveformType = 'sawtooth';
  attack = 0.004;
  decay = 0.14;
  sustain = 0.38;
  release = 0.18;
  lowPassStrength = 0.7;
  fadeInDuration = 0.005;
  fadeOutDuration = 0.005;
  //end of sound settings

  audioContextInitialized = true;
}

async function checkAudioContext() {
  if (audioContext.state === 'suspended') {
    return audioContext.resume();
  }
}
  
async function playMelody(melody, volume, loop = false) {
await initAudioContext();
  await checkAudioContext();

  const source = audioContext.createBufferSource();
  source.buffer = generateAudioBuffer(melody);
  source.loop = loop;

  source.connect(gainNode);

  if (loop) {
    if (loopedSource) {
      loopedSource.disconnect(gainNode);
    }
    loopedSource = source;
    loopedMelody = { melody, volume };
  } else {
    if (loopedSource) {
      loopedSource.disconnect(gainNode);
      source.onended = () => {
        loopedSource.connect(gainNode);
      };
    }
  }

  gainNode.gain.value = volume;
  source.start();

  return source;
}

function generateAudioBuffer(melody) {
  const gapDuration = 0.001;
  const melodyDuration = melody.reduce((acc, note) => acc + note[1] + gapDuration, 0);
  const audioBuffer = audioContext.createBuffer(1, audioContext.sampleRate * melodyDuration, audioContext.sampleRate);
  const audioBufferData = audioBuffer.getChannelData(0);

  let currentSample = 0;

  for (const [note, duration] of melody) {
    const frequency = noteToFrequencyMap[note];
    const samplesPerCycle = Math.round(audioContext.sampleRate / frequency);
    const cycles = Math.round(duration * audioContext.sampleRate);

    const noteBuffer = new Float32Array(cycles);
    for (let i = 0; i < cycles; i++) {
      switch (waveformType) {
    case 'sine':
      noteBuffer[i] = Math.sin(2 * Math.PI * (i % samplesPerCycle) / samplesPerCycle);
      break;
    case 'square':
      noteBuffer[i] = ((i % samplesPerCycle) / samplesPerCycle < 0.5 ? 1 : -1) * 0.1;
      break;
    case 'triangle':
      noteBuffer[i] = 4 * (i % samplesPerCycle) / samplesPerCycle - 1;
      if (noteBuffer[i] > 1) noteBuffer[i] = 2 - noteBuffer[i];
      break;
    case 'sawtooth':
      noteBuffer[i] = (2 * (i % samplesPerCycle) / samplesPerCycle - 1) * 0.1;
      break;
    default:
      noteBuffer[i] = Math.sin(2 * Math.PI * (i % samplesPerCycle) / samplesPerCycle);
  }
    }

    applyADSR(noteBuffer, audioContext.sampleRate, attack, decay, sustain, release);
    applyLowPassFilter(noteBuffer, lowPassStrength);

    for (let i = 0; i < noteBuffer.length; i++) {
      audioBufferData[currentSample++] = noteBuffer[i];
    }
    currentSample += Math.round(gapDuration * audioContext.sampleRate);
  }

  return audioBuffer;
}

function applyLowPassFilter(buffer, alpha) {
  let prevOutput = 0;
  for (let i = 0; i < buffer.length; i++) {
    buffer[i] = prevOutput + alpha * (buffer[i] - prevOutput);
    prevOutput = buffer[i];
  }
}

function applyADSR(buffer, sampleRate, attack, decay, sustain, release) {
  const fadeInDuration = 0.002;
  const fadeOutDuration = 0.002;
  const fadeInSamples = Math.round(sampleRate * fadeInDuration);
  const fadeOutSamples = Math.round(sampleRate * fadeOutDuration);

  const attackSamples = Math.round(sampleRate * attack);
  const decaySamples = Math.round(sampleRate * decay);
  const releaseSamples = Math.round(sampleRate * release);
  const sustainLevel = sustain;

  for (let i = 0; i < buffer.length; i++) {
    if (i < fadeInSamples) {
      buffer[i] *= i / fadeInSamples;
    } else if (i < attackSamples) {
      buffer[i] *= i / attackSamples;
    } else if (i < attackSamples + decaySamples) {
      buffer[i] *= sustainLevel + (1 - sustainLevel) * (1 - (i - attackSamples) / decaySamples);
    } else if (i >= buffer.length - releaseSamples - fadeOutSamples) {
      buffer[i] *= (buffer.length - i - fadeOutSamples) / releaseSamples;
    } else if (i >= buffer.length - fadeOutSamples) {
      buffer[i] *= (buffer.length - i) / fadeOutSamples;
    } else {
      buffer[i] *= sustainLevel;
    }
  }
}

function createButtons() {
  const buttonContainer = document.getElementById("button-container");
  buttonContainer.innerHTML = ""; // Clear the current buttons

  let songIndex = 1;
  let lastClickedSong = null;
  for (const song in soundTracks) {
    const button = document.createElement("button");
    button.textContent = `${songIndex}. ${song}`;
    button.addEventListener("click", () => {
      playMelody(soundTracks[song], 0.4, true);
      lastClickedSong = song;
      updateLastClickedSong();
    });
    buttonContainer.appendChild(button);
    songIndex++;
  }

  function updateLastClickedSong() {
    const lastClickedSongElement = document.getElementById("last-clicked-song");
    if (lastClickedSong) {
      lastClickedSongElement.textContent = `selected track: ${lastClickedSong}`;
    } else {
      lastClickedSongElement.textContent = "select a track";
    }
  }

  updateLastClickedSong();
}
	
	document.addEventListener("DOMContentLoaded", () => {
      createButtons();
    });
  </script>
</body>
</html>
	